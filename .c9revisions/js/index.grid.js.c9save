{"ts":1370633837929,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1370633756412,"patch":[[{"diffs":[[1,"function drawGrid() {\r\n    $V.Grid = {};\r\n\r\n\tvar colGridData = $V.Actual.AllocationData;\r\n\t\r\n\t$.each($V.CarryOver, function() {\r\n\t\tcolGridData.push({\r\n\t\t\tInvoiceId: this.SharePoint_x0020_Invoice.length ? this.SharePoint_x0020_Invoice.toString().split('-')[1] : null,\r\n\t\t\tBudgeted: 'Carry Over',\r\n\t\t\tamount: isNaN(this.To_x0020_be_x0020_expensed_x0020) ? 0 : this.To_x0020_be_x0020_expensed_x0020,\r\n\t\t\tel1: this.Title,\r\n\t\t\tel1Name: $C.el1Name(this.Title),\r\n\t\t\tel2: this.NEW_x0020_EL2,\r\n\t\t\tel2Name: $C.el2Name(this.NEW_x0020_EL2),\r\n\t\t\tel2BookAs: this.NEW_x0020_EL2,\r\n\t\t\tel2BookAsName: $C.el2Name(this.NEW_x0020_EL2),\r\n\t\t\tel4: this.El_x0020_4,\r\n\t\t\tel4Name: $C.el4Name(this.El_x0020_4),\r\n\t\t\tInvoiceIdValue: this.Vendor\r\n\t\t});\r\n\t});\r\n\t$V.Actual.Summary.Budgeted.push('Carry Over');\r\n\t\r\n\t$('#gridControls').removeClass('hide');\r\n\r\n\tvar colInvoiceId = $.distinct($.map($V.Actual.Data, function (i) {\r\n\t\t\t\treturn i.Id\r\n\t\t\t}));\r\n\t\t\t\r\n\tvar colInvoiceIdValue = $.distinct($.map($V.Actual.Data, function (i) {\r\n\t\t\t\treturn i.InvoiceIdValue\r\n\t\t\t})).sort(function(x,y) { return x < y ? -1 : 1 });\t\t\t\r\n\r\n\tvar colItTeam = $V.Actual.Summary.ITDept.sort(function(x,y) { return x < y ? -1 : 1 });\r\n\t\t\t\r\n\tvar sExpCatOpt = ':All';\r\n\t$.each($V.Actual.Summary.ExpSubCat, function () {\r\n\t\tif ( $.inArray($C.el2Name(this), $C.EXCLUDEEXPCAT) <0 ) {\r\n\t\t\tsExpCatOpt += ';' + this + ':' + $C.el2Name(this);\r\n\t\t}\r\n\t});\r\n\r\n\t$V.Grid.colModel = [{\r\n\t\t\tlabel : 'Invoice',\r\n\t\t\tname : 'InvoiceId',\r\n\t\t\tindex : 'InvoiceId',\r\n\t\t\tsearch : true,\r\n\t\t\tstype : 'select',\r\n\t\t\tsearchoptions : {\r\n\t\t\t\tsopt : ['eq'],\r\n\t\t\t\tvalue : $C.sOptValStr(colInvoiceId)\r\n\t\t\t}\r\n\t\t}, \r\n\t\t{\r\n\t\t\tlabel : 'Invoice ID',\r\n\t\t\tname : 'InvoiceIdValue',\r\n\t\t\tindex : 'InvoiceIdValue',\r\n\t\t\tsearch : true,\r\n\t\t\tstype : 'select',\r\n\t\t\tsearchoptions : {\r\n\t\t\t\tsopt : ['eq'],\r\n\t\t\t\tvalue : $C.sOptValStr(colInvoiceIdValue)\r\n\t\t\t}\r\n\t\t},\t\r\n\t\t{\r\n\t\t\tlabel : 'IT Dept',\r\n\t\t\tname : 'ITDepartment',\r\n\t\t\tindex : 'ITDepartment',\r\n\t\t\tsearch : true,\r\n\t\t\tstype : 'select',\r\n\t\t\tsearchoptions : {\r\n\t\t\t\tsopt : ['eq'],\r\n\t\t\t\tvalue : $C.sOptValStr(colItTeam)\r\n\t\t\t}\r\n\t\t},\r\n        {\r\n          label: 'Description',\r\n          name: 'InvoiceIdDesc',\r\n          index: 'InvoiceIdDesc'\r\n        },\r\n\t\t{\r\n\t\t\tlabel : 'Expense Category',\r\n\t\t\tname : 'el2',\r\n\t\t\tindex : 'el2',\r\n\t\t\tformatter : function (val) {\r\n\t\t\t\treturn $C.el2Name(val)\r\n\t\t\t},\r\n\t\t\tstype : 'select',\r\n\t\t\tsearchoptions : {\r\n\t\t\t\tsopt : ['eq'],\r\n\t\t\t\tvalue : sExpCatOpt\r\n\t\t\t}\r\n\t\t}, {\r\n\t\t\tlabel : 'Project',\r\n\t\t\tname : 'projectName',\r\n\t\t\tindex : 'projectName',\r\n\t\t\tstype : 'select',\r\n\t\t\tsearchoptions : {\r\n\t\t\t\tsopt : ['eq'],\r\n\t\t\t\tvalue : $C.sOptValStr($V.Actual.Summary.Project)\r\n\t\t\t}\r\n\t\t}, {\r\n    \t\tlabel : 'Recurring',\r\n\t\t\tname : 'Recurring',\r\n\t\t\tindex : 'Recurring',\r\n\t\t\tstype : 'select',\r\n            width: 70,\r\n            formatter: function(val) { return val == 'Yes' ? '<i title=\"Recurring\" class=\"icon icon-refresh\"></i>' : '<i title=\"Non-Recurring\" class=\"icon icon-minus\"></i>'},\r\n\t\t\tsearchoptions : {\r\n\t\t\t\tsopt : ['eq'],\r\n\t\t\t\tvalue : $C.sOptValStr($V.Actual.Summary.Recurring)\r\n\t\t\t}\r\n\t\t}, {\r\n\t\t\tlabel : 'Division',\r\n\t\t\tname : 'el1Name',\r\n\t\t\tindex : 'el1Name',\r\n\t\t\tstype : 'select',\r\n\t\t\tsearchoptions : {\r\n\t\t\t\tsopt : ['eq'],\r\n\t\t\t\tvalue : $C.sOptValStr($V.Actual.Summary.Division)\r\n\t\t\t}\r\n\t\t}, {\r\n\t\t\tlabel : 'Department',\r\n\t\t\tname : 'el4Name',\r\n\t\t\tindex : 'el4Name',\r\n\t\t\tstype : 'select',\r\n\t\t\tsearchoptions : {\r\n\t\t\t\tsopt : ['eq'],\r\n\t\t\t\tvalue : $C.sOptValStr($V.Actual.Summary.Department)\r\n\t\t\t}\r\n\t\t}, {\r\n\t\t\tlabel : 'Budgeted',\r\n\t\t\tname : 'Budgeted',\r\n\t\t\tindex : 'Budgeted',\r\n\t\t\tstype : 'select',\r\n\t\t\tsearchoptions : {\r\n\t\t\t\tsopt : ['eq'],\r\n\t\t\t\tvalue : $C.sOptValStr($V.Actual.Summary.Budgeted)\r\n\t\t\t}\r\n\t\t}, {\r\n\t\t\tlabel : 'Amount',\r\n\t\t\tname : 'amount',\r\n\t\t\tindex : 'amount',\r\n\t\t\talign : 'right',\r\n\t\t\tformatter : function(val) { return Math.round(val*100)/100; },\r\n\t\t\tsummaryType : 'sum',\r\n\t\t\tsummaryTpl: '{0}',\r\n\t\t\tsearch : false\r\n\t\t}\r\n\t];\r\n\r\n\tgrid = $(\"#grid\").jqGrid({\r\n\t\t\tdatatype : 'local',\r\n\t\t\tdata : colGridData,\r\n\t\t\t//treeGrid : false,\r\n\t\t\t//autowidth : true,\r\n\t\t\t//shrinkToFit : true,\r\n\t\t\theight : 'auto',\r\n\t\t\tcolModel : $V.Grid.colModel,\r\n\t\t\tmultiselect : false,\r\n\t\t\tgridview : true,\r\n\t\t\tviewrecords : true,\r\n\t\t\t//toppager : true,\t\t\t\r\n\t\t\trowNum : colGridData.length,\r\n\t\t\tgrouping : true,\r\n\t\t\tgroupingView : {\r\n\t\t\t\tgroupField : ['el2'],\r\n\t\t\t\tgroupOrder : ['asc','asc','asc','asc'], \r\n\t\t\t\tgroupSummary : [true],\r\n\t\t\t\tshowSummaryOnHide : true,\r\n\t\t\t\tgroupCollapse : true\t\t\r\n\t\t\t},\r\n\t\t\tondblClickRow : function (rowid, iRow, iCol, e) {\r\n\t\t\t\topenInvoice(grid.getRowData(rowid).InvoiceId);\r\n\t\t\t},\r\n\t\t\tcaption : \"Actual Spend Detail\"\r\n\t\t});\r\n\r\n\tgrid.navGrid('#gpager', {\r\n\t\tcaption:\"Export to CSV\", buttonicon:\"ui-icon\", onClickButton:ToExcel,\r\n\t\tedit : false,\r\n\t\tadd : false,\r\n\t\tdel : false\r\n\t});\r\n\tgrid.filterToolbar({\r\n\t\tautosearch : true\r\n\t});\r\n\t\r\n\t/*highlight the exp cat group by button */\r\n\t$('#groupExCat').addClass('btn-info');\r\n}"]],"start1":0,"start2":0,"length1":0,"length2":4899}]],"length":4899,"saved":false}
{"ts":1370635431899,"patch":[[{"diffs":[[1,"/\r\n"],[0,"function drawGri"]],"start1":0,"start2":0,"length1":16,"length2":19}]],"length":4902,"saved":false}
{"ts":1370635432753,"patch":[[{"diffs":[[1,"//"],[0,"/\r\nfunct"]],"start1":0,"start2":0,"length1":8,"length2":10}]],"length":4904,"saved":false}
{"ts":1370635435943,"patch":[[{"diffs":[[0,"///"],[1,"reference \r\n"],[0,"\r\nfuncti"]],"start1":0,"start2":0,"length1":11,"length2":23}]],"length":4916,"saved":false}
{"ts":1370635439128,"patch":[[{"diffs":[[0,"ference "],[1,"index.js"],[0,"\r\n\r\nfunc"]],"start1":5,"start2":5,"length1":16,"length2":24}]],"length":4924,"saved":false}
{"contributors":[],"silentsave":false,"ts":1370635676527,"patch":[[{"diffs":[[0,"\t\r\n\t"],[-1,"$('#gridControls').removeClass('hide');"],[0,"\r\n\r\n"]],"start1":803,"start2":803,"length1":47,"length2":8}]],"length":4885,"saved":false}
